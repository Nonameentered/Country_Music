---
title: "Country Music Project"
author: "Matt Shu"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Prereqs

```{r}
library(stm)
library(tidyverse)
# library(DBI)
library(RSQLite)
```


## Preprocessing
```{r}
conn <- dbConnect(RSQLite::SQLite(), "files/country_song_project.db")
dfSongs <- dbGetQuery(conn, 'SELECT * FROM songs')
dfLyrics <- dbGetQuery(conn, 'SELECT * FROM lyrics')
dfWords <- dbGetQuery(conn, 'SELECT * FROM Words')
dbDisconnect(conn)
```

## Dictionary Methods
```{r}
alcoholWords <- c("alcohol", "beer", "whiskey", "rum", "tequila")
relevantWords <- c("love")
perspective <- c("i", "we", "you")
america <- c("america", "american", "countri") #maybe also counti for county?
feelings <- c("dream", "hope", "sad", "tear", "")
romance <- c("girl", "beer")
songsAboutCountry <- c("country", "dirt", "road", "truck")
cursing <- c("fuck", "sin", "shit", "bullshit", "hell", "sinner", "goddamn", "Jesus Christ", "ass")
religious <- c("jesus", "christ", "god")
```


## Topic Models
```{r}
dfNewLyrics <- df %>%
mutate(weighted_string = rep(string, count)) %>% # this is where we multiply the words by their counts to create a weighted string
group_by(track_id) %>%
mutate(track_words = paste(weighted_string, collapse = " ")) %>% # paste each track's strings together
distinct() %>% # remove multiple observations of the same track
ungroup()
```

